/*
 * This build file was auto generated by running the Gradle 'buildSetup' task
 * by 'stefan.marx' at '09.10.13 14:44' with Gradle 1.7
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at http://gradle.org/docs/1.7/userguide/tutorial_java_projects.html
 */


apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'maven'
apply from: 'base.gradle'


version='1.0'


repositories {
    maven {
        url "https://raw.github.com/Appdynamics/artifact-library/master/repo/"
    }
}

// no transitive Dependencies for compile only APIs
configurations.compileOnly.transitive=false


dependencies {
    compileOnly ("log4j:log4j:1.2.15")

    compileOnly "com.appdynamics:machineagent:3.7.11"
}


generateMonitorXML {
    agentDescription = "Simple Agent Test"
    mainClass = 'de.appdynamics.ace.tutorial.customagent.simple.SimpleAgent'
}


task packageAgent (type: Zip) {
    appendix = "agent"
    into(project.name+"/lib") {
        from(project.configurations.runtime)
    }
    into(project.name) {
        from jar
        from generateMonitorXML
    }
}

tasks.assemble.dependsOn(packageAgent)


